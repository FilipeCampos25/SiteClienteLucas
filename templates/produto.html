<!-- templates/produto.html -->
{% extends "base.html" %}

{% block content %}
<section class="produto-page">
  <div class="produto-container">
    <div class="produto-gallery">
      <div class="produto-image-wrapper">
        <img src="{{ p.imagem_url }}" alt="{{ p.nome }}" class="produto-image" onerror="this.src='/static/images/placeholder.png'">
      </div>
    </div>

    <div class="produto-info">
      <h2 class="produto-title">{{ p.nome }}</h2>

      <div class="produto-price">
        <span class="price-label">PreÃ§o:</span>
        <span class="price-value">R$ {{ '%.2f' % p.valor }}</span>
      </div>

      {% if p.descricao %}
      <div class="produto-description">
        <h3>DescriÃ§Ã£o</h3>
        <p>{{ p.descricao }}</p>
      </div>
      {% endif %}

      <div class="produto-actions">
        <a href="/#produtos" class="btn-secondary">â† Voltar</a>

        {# ===========================================================
           FIX CARRINHO DEFINITIVO:
           - Passa id, nome e valor direto para o JS
           =========================================================== #}
        <button
          class="btn-primary btn-add-cart-large"
          data-id="{{ p.id }}"
          data-nome="{{ p.nome }}"
          data-valor="{{ p.valor }}"
          onclick="adicionarCarrinho(this.dataset.id, this.dataset.nome, this.dataset.valor)"
        >
          ğŸ›’ Adicionar ao Carrinho
        </button>
      </div>

      <div class="security-badge">
        <p class="security-text">
          <span>âœ“</span> Compra Segura |
          <span>ğŸ”’</span> Dados Protegidos |
          <span>ğŸ’³</span> MÃºltiplas Formas de Pagamento
        </p>
      </div>
    </div>
  </div>
</section>

<section class="related-section">
  <h2 class="section-title">VocÃª TambÃ©m Pode Se Interessar</h2>
  <p class="section-subtitle">Navegue por nossa coleÃ§Ã£o completa</p>
  <div class="related-placeholder">
    <a href="/#produtos" class="btn-primary">Ver Todos os Produtos</a>
  </div>
</section>

<section class="final-cta-section">
  <div class="cta-wrapper">
    <h2 class="cta-title">DÃºvidas sobre este produto?</h2>
    <p class="cta-description">Nosso time de especialistas estÃ¡ pronto para ajudar</p>
    <div class="cta-buttons">
      <a href="{{ WHATSAPP_LINK }}" target="_blank" class="btn-whatsapp-large">
        ğŸ’¬ WhatsApp
      </a>
      <a href="tel:+{{ WHATSAPP_NUMERO }}" class="btn-phone-large">
        â˜ï¸ Ligar
      </a>
    </div>
  </div>
</section>
{% endblock %}
